<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python仮想環境構築ガイド</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <a href="index.html" class="back-link">← トップに戻る</a>
    
    <header>
        <h1>🐍 Python仮想環境構築ガイド</h1>
        <p class="subtitle">プロジェクトごとに独立した開発環境を作る</p>
    </header>

    <section class="replace-form">
        <h3>🔄 カスタマイズ設定</h3>
        <label for="projname">プロジェクト名:</label>
        <input type="text" id="projname" class="replace-input" data-placeholder="PROJECT" placeholder="my-project">
        
        <label for="venvname" style="margin-top: 10px;">仮想環境名:</label>
        <input type="text" id="venvname" class="replace-input" data-placeholder="VENV" placeholder="venv">
    </section>

    <section>
        <h2>🤔 なぜ仮想環境が必要なのか？</h2>
        
        <h3>仮想環境とは</h3>
        <p>Python仮想環境は、プロジェクトごとに独立したPython実行環境を作る仕組みです。各プロジェクトで異なるバージョンのパッケージを使い分けることができます。</p>

        <h3>仮想環境を使う3つの理由</h3>
        
        <table>
            <thead>
                <tr>
                    <th>問題</th>
                    <th>仮想環境なし</th>
                    <th>仮想環境あり</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>パッケージの競合</strong></td>
                    <td>❌ プロジェクトAがDjango 3.0、プロジェクトBがDjango 4.0を必要とする場合、両立できない</td>
                    <td>✅ 各プロジェクトで異なるバージョンを使用可能</td>
                </tr>
                <tr>
                    <td><strong>システムの汚染</strong></td>
                    <td>❌ グローバルにインストールしたパッケージがシステム全体に影響</td>
                    <td>✅ プロジェクト内だけに影響を限定</td>
                </tr>
                <tr>
                    <td><strong>環境の再現性</strong></td>
                    <td>❌ 他の人の環境で動かない「私の環境では動くのに...」問題</td>
                    <td>✅ requirements.txtで環境を完全再現可能</td>
                </tr>
            </tbody>
        </table>

        <h3>具体例：仮想環境がないと起こる問題</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">トラブル例</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code># プロジェクトAで作業
pip install requests==2.28.0

# プロジェクトBで作業（新しいバージョンが必要）
pip install requests==2.31.0

# プロジェクトAに戻ると...
# → エラー！バージョンが変わってしまった

# 解決策：仮想環境を使う！</code></pre>
        </div>
    </section>

    <section>
        <h2>📋 前提条件</h2>
        <ul>
            <li>Pythonがインストールされている（Python 3.3以降）</li>
            <li>ターミナル（コマンドライン）が使える</li>
        </ul>

        <div class="code-block">
            <div class="code-header">
                <span class="code-title">Pythonバージョン確認</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>python3 --version
# 出力例: Python 3.11.5</code></pre>
        </div>
    </section>

    <section>
        <h2>🚀 仮想環境の作成（基本編）</h2>
        
        <h3>ステップ1: プロジェクトディレクトリを作成</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">ディレクトリ作成</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>mkdir {PROJECT}
cd {PROJECT}
pwd</code></pre>
        </div>

        <h3>ステップ2: 仮想環境を作成</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">venv作成</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>python3 -m venv {VENV}
ls -la</code></pre>
        </div>

        <h3>ステップ3: 仮想環境を有効化</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">有効化（macOS/Linux）</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>source {VENV}/bin/activate</code></pre>
        </div>

        <div class="code-block">
            <div class="code-header">
                <span class="code-title">有効化（Windows）</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code># Command Prompt
{VENV}\Scripts\activate.bat

# PowerShell
{VENV}\Scripts\Activate.ps1</code></pre>
        </div>

        <h3>ステップ4: 仮想環境が有効か確認</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">確認方法</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>which python3
pip list</code></pre>
        </div>
    </section>

    <section>
        <h2>📦 パッケージのインストール</h2>
        
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">パッケージインストール</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>pip install requests
pip install requests numpy pandas
pip install django==4.2.0
pip list</code></pre>
        </div>

        <h3>requirements.txt の作成</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">依存関係の保存</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>pip freeze > requirements.txt
cat requirements.txt</code></pre>
        </div>

        <h3>requirements.txt からインストール</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">環境の再現</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>pip install -r requirements.txt</code></pre>
        </div>
    </section>

    <section>
        <h2>🔄 仮想環境の操作</h2>
        
        <table>
            <thead>
                <tr>
                    <th>操作</th>
                    <th>macOS/Linux</th>
                    <th>Windows</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>有効化</td>
                    <td><code>source {VENV}/bin/activate</code></td>
                    <td><code>{VENV}\Scripts\activate</code></td>
                </tr>
                <tr>
                    <td>無効化</td>
                    <td><code>deactivate</code></td>
                    <td><code>deactivate</code></td>
                </tr>
                <tr>
                    <td>削除</td>
                    <td><code>rm -rf {VENV}</code></td>
                    <td><code>rmdir /s {VENV}</code></td>
                </tr>
                <tr>
                    <td>再作成</td>
                    <td><code>python3 -m venv {VENV}</code></td>
                    <td><code>python -m venv {VENV}</code></td>
                </tr>
            </tbody>
        </table>
    </section>

    <section>
        <h2>📁 .gitignore の設定</h2>
        
        <p>仮想環境のディレクトリはGitで管理しません。代わりにrequirements.txtを共有します。</p>

        <div class="code-block">
            <div class="code-header">
                <span class="code-title">.gitignoreファイル作成</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>cat > .gitignore << 'GITIGNORE'
# 仮想環境
{VENV}/
venv/
env/
ENV/
.venv/

# Python
__pycache__/
*.py[cod]
*.so

# IDE
.vscode/
.idea/

# OS
.DS_Store
Thumbs.db
GITIGNORE</code></pre>
        </div>
    </section>

    <section>
        <h2>🚀 GitHubにアップロードする方法</h2>
        
        <h3>ステップ1: Gitリポジトリの初期化</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">Git初期化</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>cd {PROJECT}
git init
pip freeze > requirements.txt
git status</code></pre>
        </div>

        <h3>ステップ2: 初回コミット</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">コミット</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>git add .
git commit -m "Initial commit: プロジェクト初期設定"
git log --oneline</code></pre>
        </div>

        <h3>ステップ3: GitHubリポジトリの作成</h3>
        <p>ブラウザで以下を実行：</p>
        <ol>
            <li>https://github.com/new にアクセス</li>
            <li>Repository name: <code>{PROJECT}</code></li>
            <li>Public を選択</li>
            <li>README, .gitignore, license は追加しない</li>
            <li>Create repository をクリック</li>
        </ol>

        <h3>ステップ4: リモートリポジトリと連携</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">リモート追加とプッシュ</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>git remote add origin https://github.com/USERNAME/{PROJECT}.git
git branch -M main
git push -u origin main</code></pre>
        </div>

        <h3>ステップ5: README.md の作成</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">README作成</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>cat > README.md << 'README'
# {PROJECT}

## セットアップ方法

### 1. リポジトリをクローン
git clone https://github.com/USERNAME/{PROJECT}.git
cd {PROJECT}

### 2. 仮想環境を作成
python3 -m venv {VENV}
source {VENV}/bin/activate

### 3. 依存パッケージをインストール
pip install -r requirements.txt

### 4. 実行
python main.py
README

git add README.md
git commit -m "Add: README作成"
git push origin main</code></pre>
        </div>
    </section>

    <section>
        <h2>🔄 他の人が環境を再現する手順</h2>
        
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">完全な再現手順</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>git clone https://github.com/USERNAME/{PROJECT}.git
cd {PROJECT}
python3 -m venv {VENV}
source {VENV}/bin/activate
pip install -r requirements.txt
python --version
pip list</code></pre>
        </div>
    </section>

    <section>
        <h2>💡 便利なテクニック</h2>
        
        <h3>エイリアスを設定</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">ショートカット設定</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code># ~/.zshrc または ~/.bashrc に追加
alias venv-create='python3 -m venv venv'
alias venv-activate='source venv/bin/activate'
alias venv-deactivate='deactivate'
alias venv-freeze='pip freeze > requirements.txt'
alias venv-install='pip install -r requirements.txt'</code></pre>
        </div>
    </section>

    <section>
        <h2>❌ トラブルシューティング</h2>
        
        <h3>問題1: 仮想環境が有効化できない</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">解決方法</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>ls -la venv/bin/activate
chmod +x venv/bin/activate</code></pre>
        </div>

        <h3>問題2: pipが古い</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">pipのアップグレード</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>pip install --upgrade pip
pip --version</code></pre>
        </div>

        <h3>問題3: 仮想環境を削除したい</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">完全削除</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>deactivate
rm -rf venv
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt</code></pre>
        </div>
    </section>

    <section>
        <h2>🎯 まとめ</h2>
        
        <h3>基本的なワークフロー</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">新規プロジェクト開始</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>mkdir {PROJECT} && cd {PROJECT}
python3 -m venv venv
source venv/bin/activate
pip install requests pandas
pip freeze > requirements.txt
echo "venv/" > .gitignore
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/USERNAME/{PROJECT}.git
git push -u origin main</code></pre>
        </div>

        <h3>既存プロジェクトのセットアップ</h3>
        <div class="code-block">
            <div class="code-header">
                <span class="code-title">クローン後の作業</span>
                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            </div>
            <pre><code>git clone https://github.com/USERNAME/{PROJECT}.git
cd {PROJECT}
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python main.py</code></pre>
        </div>
    </section>

    <section>
        <h2>📚 参考資料</h2>
        <ul>
            <li><a href="https://docs.python.org/ja/3/library/venv.html" target="_blank">Python公式ドキュメント: venv</a></li>
            <li><a href="https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/" target="_blank">pip and virtual environments</a></li>
        </ul>
    </section>

    <script src="js/script.js"></script>
</body>
</html>
